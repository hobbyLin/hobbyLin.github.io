{"version":3,"sources":["../../build/webpack.dev.js"],"names":["os","require","fs","path","webpack","HappyPack","CopyWebpackPlugin","HtmlWebpackPlugin","ExtractTextPlugin","CleanPlugin","HashedModuleIdsPlugin","cssnano","happyThreadPool","ThreadPool","size","cpus","length","console","log","env","process","NODE_ENV","argv","replace","client","common","baseDir","entries","chunks","entry","readdirSync","join","__dirname","reduce","dir","fullDir","statSync","isDirectory","existsSync","push","happyLoader","id","tempDir","loaders","threadPool","cache","verbose","plugins","from","to","disable","allChunks","optimize","CommonsChunkPlugin","name","minChunks","Infinity","DefinePlugin","JSON","stringify","ProvidePlugin","aladdin","forEach","filename","template","chunksSortMode","module","exports","devtool","Object","assign","output","chunkFilename","publicPath","test","exclude","loader","extract","postcss","autoprefixer","add","remove","browsers","discardComments","removeAll","discardUnused","mergeIdents","reduceIdents","safe","sourcemap","sassLoader","includePaths","resolve","extensions","alias","externals","concat","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin"],"mappings":"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","file":"webpack.dev.js","sourcesContent":["const os = require('os')\nconst fs = require('fs')\nconst path = require('path')\nconst webpack = require('webpack')\nconst HappyPack = require('happypack');\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst CleanPlugin = require('clean-webpack-plugin');\nconst HashedModuleIdsPlugin = require('./HashedModuleIdsPlugin');\n\nvar cssnano = require('cssnano');\n\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length });\nconsole.log('-------happyThreadPool----');\nconsole.log(happyThreadPool);\nconsole.log('-------happyThreadPool----');\n\nvar env = process.env.NODE_ENV || process.argv[2] || 'dev';\nenv = env.replace(/--/g,'');\nvar client = process.argv[3] || 'web';\nclient = client.replace(/--/g,'');\nconsole.log(process.env.NODE_ENV + ' | ' + process.argv[2] + ' | '+env + ' '+process.argv[3])\n\nvar common = [\n    'webpack-hot-middleware/client?path=/robo-ad/online_risk/__webpack_hmr',\n    //'babel-polyfill',\n    'vue',\n    //'vuex',\n    'flexible',\n    'fastclick',\n    'authsdk',\n    'authinit',\n    //'aladdin',\n    //'bow',\n    //'ZDPAEBank',\n];\nconst baseDir = '../src/container'\nvar entries = {\n    'common':common,\n    // 'app': ['webpack-hot-middleware/client?path=/robo-ad/aum_zntg/__webpack_hmr', '../src/app.js']\n};\nvar chunks = [];\nvar entry = fs.readdirSync(path.join(__dirname, baseDir)).reduce((entries, dir) => {\n    const fullDir = path.join(__dirname, baseDir + '/' + dir);\n    console.log(dir) // finance\n    // console.log(fullDir)\n    const entry = path.join(fullDir, 'index.js')\n    if (fs.statSync(fullDir).isDirectory() && fs.existsSync(entry)) {\n         entries[dir] = ['webpack-hot-middleware/client?path=/robo-ad/online_risk/__webpack_hmr', entry]\n         chunks.push(dir);\n    }\n    return entries;\n}, {});\n// console.log(entry);\nvar happyLoader = [\n    new HappyPack({\n        id: 'js',\n        tempDir: '.happypackDev/',\n        loaders: [ 'babel' ],\n        threadPool: happyThreadPool,\n        cache: true,\n        verbose: true\n    })\n]\n\nvar plugins = [\n    new CopyWebpackPlugin([\n        { from: 'src/assets/lib/runtime-check.js', to: 'assets/js' },\n        { from: 'src/assets/lib/aladdin.ibank.web.min.js', to: 'assets/js' },\n        { from: 'src/assets/lib/aladdin.ibank.min.js', to: 'assets/js' },\n    ]),\n    new HashedModuleIdsPlugin(),\n    new ExtractTextPlugin('assets/css/theme/default/style.css?[contenthash:8]', {\n        disable: false,\n        allChunks: false\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n        name: 'common',\n        minChunks: Infinity\n        // children: true,\n        // chunks: chunks,\n        // minChunks: chunks.length // 提取所有entry共同依赖的模块\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n        name: 'manifest',\n        chunks: ['common'],\n        minChunks: Infinity\n    }),\n    new webpack.DefinePlugin({\n        'process.env.NODE_ENV': JSON.stringify('development'),\n        'ENV': JSON.stringify(process.env.NODE_ENV || 'dev')\n    }),\n\n    new webpack.ProvidePlugin({\n        aladdin: \"aladdin\",\n        //bow: \"bow\"\n    })\n];\n\n// plugins.push(new HtmlWebpackPlugin({\n//     filename: 'demo.html',\n//     template: '../src/index.html',\n//     chunks: [\n//         'manifest', 'common', 'app'\n//     ],\n//     chunksSortMode: 'dependency',\n//     env: 'dev'\n//     // favicon: path.join(__dirname, 'assets', 'images', 'favicon.ico'),\n// }))\nchunks.forEach(function(name) {\n    if (name !== 'app') {\n        plugins.push(new HtmlWebpackPlugin({\n            filename: (name=='finance'?'index':name) + '.html',\n            template: path.join(__dirname, baseDir + '/' + name) + '/index.html',\n            chunks: [\n                'manifest', 'common', name\n            ],\n            chunksSortMode: 'dependency',\n            env: env\n            // favicon: path.join(__dirname, 'assets', 'images', 'favicon.ico'),\n        }))\n    }\n})\n\nmodule.exports = {\n\n    devtool: '#eval-source-map',\n    // entry:{\n    //   app:['webpack-hot-middleware/client?path=/omm/mobile/__webpack_hmr','../src/app.js']\n    // },\n    entry: Object.assign({}, entries, entry),\n\n    output: {\n        path: path.join(__dirname, ''),\n        filename: 'assets/js/[name].js',\n        chunkFilename: 'assets/js/[name].chunk.js',\n        publicPath: ''\n    },\n\n    module: {\n        loaders: [\n            {\n                test: /\\.js$/,\n                exclude: /node_modules/,\n                loader: 'happypack/loader?id=js'\n            }, {\n                test: /\\.vue$/,\n                loader: 'vue'\n            }, {\n                test: /\\.css$/,\n                loader: ExtractTextPlugin.extract(\"style\", 'css!postcss')\n            }, {\n                test: /\\.scss$/,\n                loader: ExtractTextPlugin.extract(\"css!postcss!sass\")\n            }, {\n                test: /\\.woff(\\?.*)?$/,\n                loader: 'url?prefix=fonts/&name=assets/fonts/[name].[ext]&limit=10000&mimetype=application/font-woff'\n            }, {\n                test: /\\.woff2(\\?.*)?$/,\n                loader: 'url?prefix=fonts/&name=assets/fonts/[name].[ext]&limit=10000&mimetype=application/font-woff2'\n            }, {\n                test: /\\.otf(\\?.*)?$/,\n                loader: 'file?prefix=fonts/&name=assets/fonts/[name].[ext]&limit=10000&mimetype=font/opentype'\n            }, {\n                test: /\\.ttf(\\?.*)?$/,\n                loader: 'url?prefix=fonts/&name=assets/fonts/[name].[ext]&limit=10000&mimetype=application/octet-stream'\n            }, {\n                test: /\\.eot(\\?.*)?$/,\n                loader: 'file?prefix=fonts/&name=assets/fonts/[name].[ext]'\n            }\n            // , {\n            //     test: /\\.svg(\\?.*)?$/,\n            //     loader: 'url?prefix=fonts/&name=assets/fonts/[name].[ext]&limit=10000&mimetype=image/svg+xml'\n            // }\n            , {\n                test: /.*\\.(gif|png|jpe?g|svg)$/i,\n                loader: 'url?context=client&name=assets/images/[name].[ext]?[hash:8]&limit=1&publicPath=/robo-ad/online_risk/&outputPath=assets/images/'\n            }\n        ]\n    },\n    postcss: [\n        cssnano({\n            autoprefixer: {\n                add: true,\n                remove: true,\n                browsers: ['> 0%']\n            },\n            discardComments: {\n                removeAll: true\n            },\n            discardUnused: false,\n            mergeIdents: false,\n            reduceIdents: false,\n            safe: true,\n            sourcemap: true\n        })\n    ],\n    sassLoader: {\n            includePaths: [path.resolve(__dirname, \"../src\")]\n        },\n    resolve: {\n        extensions: ['', '.js','.vue','.css','.scss'],\n        alias: {\n            'flexible': path.resolve(__dirname, '../src/assets/lib/flexible.js'),\n            'fastclick': path.resolve(__dirname, '../src/assets/lib/fastclick.js'),\n            'authsdk': path.resolve(__dirname, '../src/assets/lib/auth-sdk.wuat2.js'),\n            'authinit': path.resolve(__dirname, '../src/assets/lib/authinit.js'),\n        }\n    },\n\n    externals: {\n        aladdin: \"aladdin\",\n    },\n\n    plugins: plugins.concat([\n        new webpack.optimize.OccurenceOrderPlugin(),\n        new webpack.HotModuleReplacementPlugin(),\n        new webpack.NoErrorsPlugin()\n    ], happyLoader)\n\n}\n"]}